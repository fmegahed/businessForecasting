---
title: "ISA 444: Business Forecasting"
subtitle: "22 - Seasonal ARIMA Models"
author: Fadel M. Megahed
date: 'Fall 2020'
output:
  beamer_presentation:
    number_sections: false
    toc: false
    slide_level: 3
    includes: 
      in_header: structure.txt
classoption: "aspectratio=169"
always_allow_html: yes
bibliography: refs.bib
link-citations: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      warning = FALSE,
                      message = FALSE,
                      verbose = FALSE,
                      progress = FALSE,
                      fig.align = "center",
                      fig.pos = 'p',
                      fig.width = 5.8,
                      fig.height= 2.9,
                      allowframebreaks = TRUE,
                      fig.margin=TRUE,
                      kable.force.latex = TRUE,
                      cache = TRUE)
options(kableExtra.latex.load_packages = FALSE)
pacman::p_load(kableExtra, tidyverse, tidyquant, xtable, magrittr, fpp2, ggpubr)
```

# Preface

### Recap of What we Have Covered Last Class

\begin{block}{\textbf{Main Learning Outcomes}}
  \begin{itemize}
      \item \textbf{Describe AIC, AICc, and BIC and how they are used to measure model fit.}
      \item \textbf{Describe the algorithm used within the auto.arima() function to fit an ARIMA model.}
      \item \textbf{Describe the results of the auto.arima() function.}
	\end{itemize}
\end{block}

### Learning Outcomes for Today's Class
\begin{block}{\textbf{Main Learning Outcomes}}
  \begin{itemize}
      \item \textbf{Describe a seasonal ARIMA model and explain how it applies to a seasonal time series.}
      \item \textbf{Recognize when to fit a seasonal ARIMA model.}
	\end{itemize}
\end{block}



# The `auto.arima()` Function

### The `auto.arima()` Function {.allowframebreaks}

The auto.arima() function can be used to automatically fit ARIMA models to a time series. It is a useful function, but it should be used with caution.

**The function**  

  - Uses “brute force” to fit many models and then selects the “best” based on a certain model criterion  
  - Works best when the data are stationary, but can be used with nonstationary data  
  - Tends to overfit the data  
  - Should always be used as a starting point for selecting a model and all models derived from the `auto.arima()` function should be properly vetted and evaluated.


The `auto.arima()` function combines  
  - Unit root tests (KPSS by default)  
  - Minimization of AICc
to obtain an $ARIMA(p,d,q)$ model using the following algorithm:


  1. Determine the number of differences, $d$, using a sequence of KPSS tests.  
  
  2. Determine $p$ and $q$ by minimizing AICc after differencing the data d times. Rather than considering all possible $p$ and $q$ combinations, a stepwise approach is taken.  
      - The best initial model with lowest AICc is selected from the following four:   
        - ARIMA (2,$d$,2),  
        - ARIMA (0,$d$,0),  
        - ARIMA (1,$d$,0), and   
        - ARIMA (1,$d$,0).  
        - *If d=0, then a constant, $c$, is included. If $d \ge 1$, then the constant is set to 0. The results of this step is called the current model.*  
      - Variations on the current model are considered by  
        - Vary $p$ and/or $q$ from current model by $\pm 1$  
        - Include/exclude $c$ from current model.  
        - The best model considered so far (either current or one of variations) becomes the *new current model*. 
      - Repeat previous step until no lower AICc can be found.
    

### Live Coding: Example 1
```{r birthData}
pacman::p_load(astsa)
birthData = birth # also from the astsa package
```

### In-Class Activity

Use the data [“22 - Netflix_growth_pct_2000.csv”](https://miamioh.instructure.com/courses/123532/files/17887718?module_item_id=2633104). Fit an ARIMA model using the auto.arima() function. Describe the model that is fit, evaluate the model residuals.


### Things to Do to Prepare for Exam

 - Thoroughly read Chapters 6.2-6.8 of our textbook.
 
 - Go through the slides, examples and make sure you have a good understanding of what we have covered.  
 
 - Go through the self-paced study guide, which will be shared with you by close of business Thursday.
 
 - Exam will be released by 10 am on Sunday; no class on Monday. You will have until Wednesday 2:50 pm to complete it (once you start the exam, you have three hours to complete it).
 


---

\maketitle